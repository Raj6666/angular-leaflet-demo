<!-- 2017-12-12 13:01:52 | 版权所有 合肥火星科技有限公司 http://www.marsgis.cn  【联系我们QQ：516584683】 -->
<!DOCTYPE html><html><head><title>Layer Groups and Layers Control - Leaflet - a JavaScript library for interactive maps</title><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="shortcut icon" type="image/x-icon" href="../docs/images/favicon.ico"><link rel="stylesheet" href="../docs/css/normalize.css" tppabs="http://www.marsgis.cn/docs/css/normalize.css"><link rel="stylesheet" href="../docs/css/main.css" tppabs="http://www.marsgis.cn/docs/css/main.css"><script src="../docs/highlight/highlight.pack.js" tppabs="http://www.marsgis.cn/docs/highlight/highlight.pack.js"></script><link rel="stylesheet" href="../docs/highlight/styles/github-gist.css" tppabs="http://www.marsgis.cn/docs/highlight/styles/github-gist.css"><link rel="stylesheet" href="../docs/lib/leaflet.css" tppabs="http://www.marsgis.cn/docs/lib/leaflet.css"><script src="../docs/lib/leaflet.js" tppabs="http://www.marsgis.cn/docs/lib/leaflet.js"></script><script>ACCESS_TOKEN="pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpandmbXliNDBjZWd2M2x6bDk3c2ZtOTkifQ._QA7i5Mpkd_m30IGElHziw",MB_ATTR='Map data &copy; <a href="http://openstreetmap.org/">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://mapbox.com/">Mapbox</a>',MB_URL="http://a.tile.openstreetmap.org/{z}/{x}/{y}.jpg",OSM_URL="http://a.tile.openstreetmap.org/{z}/{x}/{y}.jpg",OSM_ATTRIB=""</script></head><body><div class="container"><p class="tutorials-back"><a href="../examples.html" tppabs="http://www.marsgis.cn/examples.html">&larr; 所有教程</a></p><h2 id="section">图层分组和图层控制</h2><p>这个教程将告诉你如何管理地图图层，并且如何使用图层切换控件轻松的切换地图上的不同图层。</p><div id="map" class="map" style="height:250px"></div><p><a href="layers-control-example.html" tppabs="http://www.marsgis.cn/examples/layers-control-example.html" target="_blank">单独打开页面查看这个例子 &rarr;</a></p><h3 id="section-1">图层组</h3><p>将一系列的图层合并到一个图层组中，代码如下所示：</p><div class="highlighter-rouge"><pre class="highlight"><code>var littleton = L.marker([31.61, 115.02]).bindPopup('This is Littleton, CO.'),
	denver    = L.marker([31.74, 114.99]).bindPopup('This is Denver, CO.'),
	aurora    = L.marker([31.73, 114.8]).bindPopup('This is Aurora, CO.'),
    golden    = L.marker([31.77, 115.23]).bindPopup('This is Golden, CO.');
</code></pre></div><p>与将它们直接放入地图中相反，通过使用<a href="javascript:if(confirm('http://leafletjs.com/reference.html  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ�����·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ���?'))window.location='http://leafletjs.com/reference.html#layergroup'" tppabs="http://leafletjs.com/reference.html#layergroup">LayerGroup</a>类来实现图层类：</p><div class="highlighter-rouge"><pre class="highlight"><code>var cities = L.layerGroup([littleton, denver, aurora, golden]);
</code></pre></div><p>非常简单吧！现在合并城市标注点到一个<code class="highlighter-rouge">cities</code>图层，从而可以每次在地图中添加或者移除该图层了。</p><h3 id="section-2">图层控制</h3><p>Leaflet有一个非常好用的小控件，这个控件能让用户控制图层以便在地图上看到。除了如何使用，我们还示范另一个便捷的图层组功能。</p><p>一共有两类图层。底图：是有交互的封闭性图层（只有该图层在用户的地图上能被看到），例如瓦片图层。另一种是覆盖物图层：放置在底图上用户的东西。在这个例子中，我们使用两类底图（灰色底图和深色风格底图）来彼此转换，使用一个覆盖物作为城市标记（我们之前创建的）的开关。我们创建这些图层，并添加默认一个到地图中：</p><pre><code>var grayscale = L.tileLayer(mapboxUrl, {id: '<a href="javascript:if(confirm('https://mapbox.com/  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ�����·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ���?'))window.location='https://mapbox.com/'" tppabs="https://mapbox.com/">MapID</a>', attribution: mapboxAttribution}),
	streets   = L.tileLayer(mapboxUrl, {id: '<a href="javascript:if(confirm('https://mapbox.com/  \n\n���ļ��޷��� Teleport Ultra ����, ��Ϊ ����һ�����·���ⲿ������Ϊ������ʼ��ַ�ĵ�ַ��  \n\n�����ڷ������ϴ���?'))window.location='https://mapbox.com/'" tppabs="https://mapbox.com/">MapID</a>', attribution: mapboxAttribution});
var map = L.map('map', {
	center: [31.73, 114.99],
	zoom: 10,
	layers: [grayscale, cities]
});</code></pre><p>接下来，我们将创建两个对象。一个将包括我们的底图，一个将包括我们的覆盖物图层。这些对象里是一些简单的键值对。键是控件中显示的文本信息，例如&#8221;Streets&#8221;。相关的值是反映在图层中的值，例如<code class="highlighter-rouge">streets</code>。</p><pre><code>var baseMaps = {
	"Grayscale": grayscale,
	"Streets": streets
};
var overlayMaps = {
    "Cities": cities
};</code></pre><p>现在，就剩下创建一个<a href="../reference.html#control-layers" tppabs="http://www.marsgis.cn/reference.html#control-layers">图层控制器</a>并把它添加到地图中。创建图层控制器的第一个参数是底图图层对象，第二个参数是覆盖物图层对象。两个参数都是可选的，例如，你可以缺省第二个参数，只填第一个参数；也可以只填覆盖物对象，把第一个参数填为null。</p><pre><code>L.control.layers(baseMaps, overlayMaps).addTo(map);</code></pre><p>注意我们把<code class="highlighter-rouge">grayscale</code>和<code class="highlighter-rouge">cities</code>图层添加到地图中，并没有添加<code class="highlighter-rouge">streets</code>图层。图层控制器非常的聪明，能够探测到我们已经在地图上加载的图层以及相关的选项集。</p><p>还需要注意的是当使用多个底图图层的时候，仅仅只有一个底图能够作为实例添加到地图中，但是在创建地图控制器的时候，这些所有的底图都需要作为底图图层对象这个参数。</p><p>现在，让我们<a href="layers-control-example.html" tppabs="http://www.marsgis.cn/examples/layers-control-example.html" target="_blank">单独打开页面查看这个例子 &rarr;</a>。</p><script>var cities=new L.LayerGroup;L.marker([31.61,115.02]).bindPopup("This is Littleton, CO.").addTo(cities),L.marker([31.74,114.99]).bindPopup("This is Denver, CO.").addTo(cities),L.marker([31.73,114.8]).bindPopup("This is Aurora, CO.").addTo(cities),L.marker([31.77,115.23]).bindPopup("This is Golden, CO.").addTo(cities);var grayscale=L.tileLayer("http://webrd01.is.autonavi.com/appmaptile?lang=zh_cn&size=1&scale=1&style=7&x={x}&y={y}&z={z}"),streets=L.tileLayer("http://mt1.google.cn/vt/lyrs=s&hl=zh-CN&gl=CN&x={x}&y={y}&z={z}&s=Gali"),map=L.map("map",{center:[31.73,114.99],zoom:10,layers:[grayscale,cities]}),baseLayers={"电子地图":grayscale,"卫星地图":streets},overlays={Cities:cities};L.control.layers(baseLayers,overlays).addTo(map)</script><div class="footer"><p>&copy; 版权所有 <a href="http://leafletjs.com" target="_blank">Leaflet </a>&nbsp; &nbsp; 翻译<a href="http://www.marsgis.cn" target="_blank">合肥火星科技</a></p></div></div><script>hljs.configure({tabReplace:"    "}),hljs.initHighlighting(),function(){if(document.body.className.indexOf("api-page")!==-1)for(var i=document.getElementsByTagName("h2"),n=0,e=i.length;n<e;n++)i[n].id&&(i[n].onclick=function(i){i.offsetX<0&&(window.location.hash="#"+this.id)})}()</script><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-4147697-4"]),_gaq.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www/")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script src="../docs/js/docs.js" tppabs="http://www.marsgis.cn/docs/js/docs.js"></script></body></html>